(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["66568dac"],{d9f67:function(t,e,i){"use strict";var a=i("ea4d"),n=i.n(a);n.a},e00c:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"q-pa-lg bg-grey-4"},[i("div",{staticClass:"row items-start q-gutter-md ",staticStyle:{"justify-content":"center"}},[t._l(t.list,(function(e){return i("q-card",{key:e.richMenuId,staticClass:"my-card"},[i("div",[i("q-card-section",[i("q-icon",{staticStyle:{"font-size":"24px"},attrs:{name:"web"}}),e.default?i("q-chip",{attrs:{color:"yellow-10","text-color":"white",icon:"star",label:"預設",dense:""}}):t._e(),i("b",{staticClass:"q-ml-sm"},[t._v(t._s(e.name))])],1),i("q-separator",{attrs:{color:"faded",inset:""}}),i("q-card-section",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",height:"280px"}},[e.image?i("q-img",{attrs:{src:t.api_url+e.image}}):i("div",{staticClass:"text-center"},[i("p",[t._v("此 RichMenu 沒有圖片")]),i("q-btn",{on:{click:function(i){t.imageUploadDialog=!0,t.targetMenu=e}}},[t._v("上傳圖片")])],1)],1),i("q-card-section",[i("div",{staticClass:"row"},[i("q-btn",{staticClass:"col-4",attrs:{flat:"",icon:"code"},on:{click:function(i){t.jsonDialog=!0,t.targetMenu=e}}},[t._v("查看JSON")]),e.default?i("q-btn",{staticClass:"col-4",attrs:{flat:"",icon:"star"},on:{click:t.cancelDefault}},[t._v("取消預設")]):i("q-btn",{staticClass:"col-4",attrs:{flat:"",icon:"star_border"},on:{click:function(i){return t.setDefault(e)}}},[t._v("設為預設")]),i("q-btn",{staticClass:"col-4",attrs:{flat:"",icon:"delete",color:"red"},on:{click:function(i){return t.deleteRichMenu(e)}}},[t._v("刪除")])],1)])],1)])})),0===t.listSize?i("div",[i("h6",[t._v("你還沒有半個RichMenu，快從左邊選單建立一個吧！")])]):t._e(),i("q-dialog",{model:{value:t.jsonDialog,callback:function(e){t.jsonDialog=e},expression:"jsonDialog"}},[i("q-card",[i("q-card-section",[i("vue-json-pretty",{attrs:{path:"res",data:t.json}})],1)],1)],1),i("q-dialog",{model:{value:t.imageUploadDialog,callback:function(e){t.imageUploadDialog=e},expression:"imageUploadDialog"}},[i("q-card",[i("q-card-section",[i("p",[t._v("檔案大小限制： 1MB")]),i("p",[t._v("圖片格式限制： JPEG、PNG")]),i("p",[t._v("圖片尺寸： 2500x1686, 2500x843, 1200x810, "),i("br"),t._v(" 1200x405, 800x540, 800x270")]),i("div",{staticStyle:{"text-align":"center"}},[i("q-uploader",{attrs:{label:"點擊旁邊按鈕選取圖片","auto-upload":"",url:t.api_url+"/api/upload","max-file-size":1048576,accept:".jpg, image/*",headers:[{name:"X-richMenu-ID",value:t.targetMenu.richMenuId},{name:"token",value:t.$store.state.richMenu.accessToken}]},on:{uploaded:t.uploaded,failed:t.uploadFailed}})],1)])],1)],1)],2)])},n=[],o=(i("f751"),i("d538")),s=i.n(o),c=i("2ef0"),l=i.n(c),r={name:"PageIndex",components:{VueJsonPretty:s.a},data:function(){return{targetMenu:{},jsonDialog:!1,imageUploadDialog:!1,api_url:"http://localhost:3030"}},methods:{uploaded:function(t){var e=this;setTimeout((function(){e.$store.dispatch("richMenu/getList"),e.imageUploadDialog=!1}),1e3)},uploadFailed:function(){this.$q.notify({message:"圖片格式或大小有誤",color:"red",timeout:3e3})},deleteRichMenu:function(t){var e=this;this.$q.dialog({title:"注意",message:"確定刪除此 RichMenu，刪除後無法復原",cancel:"取消",ok:"刪除"}).onOk((function(){e.$store.dispatch("richMenu/postDelete",{id:t.richMenuId}).then((function(){e.$q.notify({message:"刪除成功囉",color:"info",timeout:2e3}),e.$store.dispatch("richMenu/getList")})).catch((function(){e.$q.notify({message:"刪除失敗了",color:"warning",timeout:2e3})}))}))},setDefault:function(t){var e=this;this.$q.dialog({title:"注意",message:"確定將此 RichMenu 設為預設？",cancel:"取消",ok:"確定"}).onOk((function(){e.$store.dispatch("richMenu/postDefault",{id:t.richMenuId}).then((function(){e.$store.dispatch("richMenu/getList"),e.$q.notify({message:"設為預設囉!",color:"info",timeout:2e3})})).catch((function(){e.$q.notify({message:"設置失敗了",color:"warning",timeout:2e3})}))}))},cancelDefault:function(){var t=this;this.$q.dialog({title:"注意",message:"確定要取消預設? 取消後用會端將不會顯示任何RichMenu",cancel:"取消",ok:"確定"}).onOk((function(){t.$store.dispatch("richMenu/cancelDefault").then((function(){t.$store.dispatch("richMenu/getList"),t.$q.notify({message:"已經取消預設囉!",color:"info",timeout:2e3})})).catch((function(){t.$q.notify({message:"設置失敗了",color:"warning",timeout:2e3})}))}))}},computed:{listSize:function(){return l.a.size(this.$store.state.richMenu.list)},list:function(){return this.$store.state.richMenu.list},json:function(){var t=Object.assign({},this.targetMenu);return delete t["image"],delete t["default"],t}},mounted:function(){!1===this.$store.state.richMenu.isLoad&&this.$router.push("/search")}},u=r,d=(i("d9f67"),i("2877")),f=i("fe09"),g=Object(d["a"])(u,a,n,!1,null,null,null);e["default"]=g.exports;g.options.components=Object.assign({QPage:f["q"],QCard:f["b"],QCardSection:f["c"],QIcon:f["i"],QChip:f["e"],QSeparator:f["s"],QImg:f["j"],QBtn:f["a"],QDialog:f["f"],QUploader:f["v"]},g.options.components||{})},ea4d:function(t,e,i){}}]);